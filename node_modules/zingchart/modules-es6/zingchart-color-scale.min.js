/*
All of the code within the ZingChart software is developed and copyrighted by ZingChart, Inc., and may not be copied,
replicated, or used in any other software or application without prior permission from ZingChart. All usage must coincide with the
ZingChart End User License Agreement which can be requested by email at support@zingchart.com.

Build 2.9.3_ES6
*/
zingchart.setModule("color-scale"),zingchart.plugins.colorscale={},zingchart.plugins.colorscale.info={},zingchart.plugins.colorscale.defaults={box:{},item:{placement:"default","font-size":10,color:"#33"},label:{"font-size":10,color:"#33"},guide:{"line-color":"#fff","line-width":1},cursor:{type:"diamond",size:4,"background-color":"#000"}},zingchart.bind(null,"complete",function(a){zingchart.plugins.colorscale.paint(a)}),zingchart.plugins.colorscale.paint=function(a){var e=zingchart.getLoader(a.id),i=zingchart.getModules(e);if(-1!==ZC.AV(i,"color-scale"))for(var l=0,r=e.AH.length;l<r;l++){var t=e.AH[l];if(t.o["color-scale"]){var c=zingchart.plugins.colorscale.defaults,o=t.o["color-scale"]||{};o.guide=o.guide||{};var n,s=o.aspect||"gradient",h=o.intervals||4,g=o.layout||"v",p=o.color||"#369",u=o["max-percent"]||50,_=o.effect||"lighten",d=o.progression||"lin",f=ZC._f_(o["min-value"]||"0"),C=ZC._f_(o["max-value"]||"10"),Z=o.steps||[],z=o.colors||[],m=o[ZC._[10]]||[],v=ZC._b_(o.mirrored);ZC._b_(o.map)&&(n=zingchart.maps.getMapByGraphIndex(a.id,t.L)._INFO_.choropleth)&&(s=n.aspect,h=n.intervals,p=n.color,u=n.maxPercent,_=n.effect,d=n.progression,f=n.minValue,C=n.maxValue,Z=n.steps,z=n.colors,m=n[ZC._[10]],v=n.mirrored),"v"===g?(o.margin=o.margin||"auto 10 auto auto",o[ZC._[19]]=o[ZC._[19]]||15,o[ZC._[20]]=o[ZC._[20]]||200,o["fill-angle"]=270):(o.margin=o.margin||"auto auto 35 auto",o[ZC._[19]]=o[ZC._[19]]||200,o[ZC._[20]]=o[ZC._[20]]||15,o["fill-angle"]=0);var x=zingchart.getInstance(t,"box");x.append(c.box),x.append(o),x.parse();var y,b,Y,I,A,M="v"===g?x.F:x.I,F=[],G=null;if("gradient"===s){var X=Math.max(2,Math.ceil(M/("v"===g?30:60)));if("log"===d){for((I=Math.floor(ZC.GY(f,10)))===(A=Math.ceil(ZC.GY(C,10)))&&A++,y=I;y<=A;y+=1)F.push(Math.pow(10,y));if(F.length>X&&F.length%2==1)for(y=F.length-1;y>=0;y--)y%2==1&&F.splice(y,1)}else{Y=ZC.AP.WE(f,C);for(var L=0;(Y[1]-C)/Y[2]>.5&&L<10;)Y=ZC.AP.WE(f,C,Math.round(Y[2]/2)),L++;for(G=Y[3]<0?-Y[3]:null,0===Y[3]&&Y[2]<1&&(G=1),y=Y[0];y<=Y[1];y+=Y[2])F.push(y);if(F.length>1.5*X){if(F.length%2==1)for(y=F.length-1;y>=0;y--)y%2==1&&F.splice(y,1);if(F.length>1.5*X)for(var k=!1;!k;){for(k=!0,F=[],y=(Y=ZC.AP.WE(f,C,2*Y[2]))[0];y<=Y[1];y+=Y[2])F.push(y);F.length>1.5*X&&(k=!1)}}}}else{var w;if(Z.length)h=Z.length-1;else if("lin"===d){var P=(C-f)/h;for(b=0;b<h;b+=1)Z.push(f+b*P);Z.push(C)}else{for((I=Math.floor(ZC.GY(f,10)))===(A=Math.ceil(ZC.GY(C,10)))&&A++,h=Math.max(1,A-I-1),b=I;b<=A;b+=1)Z.push(Math.pow(10,b));w=u/h}if(!z.length)for(b=0;b<=h;b+=1)z.push("lighten"===_?ZC.AO.QS(p,b*w):ZC.AO.JQ(p,b*w));F=[].concat(Z)}var K=a.id+"_"+t.L;zingchart.plugins.colorscale.info[K]={aspect:s,min:F[0],max:F[F.length-1],progression:d,layout:g,x:x.iX,y:x.iY,width:x.I,height:x.F,steps:Z};var j=0,O=0,Q=zingchart.getInstance(t,"textbox");for(y=0;y<F.length;y++)Q.append(c.item),Q.append(o.item),Q.o.text=F[y],Q.parse(),j=Math.max(j,Q.I),O=Math.max(O,Q.F);var E,V,W=[],D=[];if(zingchart.exec(a.id,"removeobject",{graphid:t.K,type:"shape",cls:"zc-colorscale"}),zingchart.exec(a.id,"removeobject",{graphid:t.K,type:"label",cls:"zc-colorscale"}),"gradient"===s){E={flat:!0,cls:"zc-colorscale"};var H=p,J="lighten"===_?ZC.AO.QS(p,u):ZC.AO.JQ(p,u);E[ZC._[0]]=H+" "+J,v&&(E[ZC._[0]]=J+" "+H),ZC._cp_(x.o,E),E.id="colorscale_box",W.push(E)}else for(b=0;b<h;b+=1)E={flat:!0,cls:"zc-colorscale"},ZC._cp_(x.o,E),E[ZC._[0]]=z[b],E.id="colorscale_box_"+b,"h"===g?(E.x=x.iX+b*x.I/h,E.y=x.iY,E[ZC._[19]]=x.I/h,E[ZC._[20]]=x.F):(E.x=x.iX,E.y=x.iY+x.F-(b+1)*x.F/h,E[ZC._[19]]=x.I,E[ZC._[20]]=x.F/h),ZC._cp_(o.marker,E),0===b&&(zingchart.plugins.colorscale.info[K].marker=[E[ZC._[19]],E[ZC._[20]]]),E.margin=null,W.push(E),m[b]&&(V={flat:!0,cls:"zc-colorscale"},ZC._cp_(c.label,V),ZC._cp_(o.label,V),V.text=m[b],"h"===g?(V[ZC._[19]]=x.I/h,V.x=x.iX+b*x.I/h,V.y=x.iY):(V[ZC._[20]]=x.F/h,V.x=x.iX+x.I+5,V.y=x.iY+x.F-(b+1)*x.F/h),V.id="colorscale_label_"+b,W.push(V));var N,S,B,q,R=M/(F.length-1),T=[];for(y=0;y<F.length;y++){if(S={flat:!0,cls:"zc-colorscale"},ZC._cp_(c.item,S),ZC._cp_(o.item,S),B={decimals:G,short:!0,"thousands-separator":",","decimals-separator":"."},"log"===d){var U=Math.floor(ZC.GY(F[y],10));B.decimals=U<0?-U:0}ZC._cp_(o.item,B),q=zingchart.formatNumber(F[y],B);var $=ZC._i_(o.guide[ZC._[21]]||("v"===g?x.I:x.F));"v"===g?(N=x.iY+x.F-R*y,T.push([x.iX,N],[x.iX+$,N],null),ZC._cp_({anchor:"l",width:j,align:"right",x:x.iX-j-5,y:N,text:q},S)):(N=x.iX+R*y,T.push([N,x.iY],[N,x.iY+$],null),ZC._cp_({anchor:"t",height:O,align:"center","vertical-align":"top",x:N,y:x.iY+x.F+5,text:q},S)),S.x-=t.iX,S.y-=t.iY,S.id="colorscale_item_"+y,W.push(S)}var aa={type:"line",flat:!0,cls:"zc-colorscale"};ZC._cp_(c.guide,aa),ZC._cp_(o.guide,aa),aa.id="colorscale_guide",aa.points=T,D.push(aa);var ea={flat:!0,visible:!1,cls:"zc-colorscale"};ZC._cp_(c.cursor,ea),ZC._cp_(o.cursor,ea),ea.id="colorscale_cursor";var ia=zingchart.plugins.colorscale.info[K].marker?zingchart.plugins.colorscale.info[K].marker[0]:x.I,la=zingchart.plugins.colorscale.info[K].marker?zingchart.plugins.colorscale.info[K].marker[1]:x.F;ea.x=x.iX+ia/2-t.iX,ea.y=x.iY+la/2-t.iY,D.push(ea),zingchart.exec(a.id,"addobject",{graphid:t.K,type:"label",data:W,dynamic:!0,update:!1}),zingchart.exec(a.id,"addobject",{graphid:t.K,type:"shape",dynamic:!0,data:D})}}},zingchart.plugins.colorscale.clear=function(a,e){a=a||"zc";var i=zingchart.getLoader(a);if(i){var l=zingchart.getGraph(i,e[ZC._[3]]||"0");if(l){if(!zingchart.plugins.colorscale.info[a+"_"+l.L])return;zingchart.exec(a,"updateobject",{graphid:l.K,type:"shape",id:"colorscale_cursor",dynamic:!0,data:{visible:!1}})}}},zingchart.plugins.colorscale.AGD=function(a,e){if(null!==ZC._n_(e[ZC._[9]])){a=a||"zc";var i=zingchart.getLoader(a);if(i){var l=zingchart.getGraph(i,e[ZC._[3]]||"0");if(l){if(!zingchart.plugins.colorscale.info[a+"_"+l.L])return;var r,t,c,o=ZC._f_(e[ZC._[9]]),n=zingchart.plugins.colorscale.info[a+"_"+l.L];if("gradient"===n.aspect)"lin"===n.progression?(r=(o-n.min)/(n.max-n.min),t="h"===n.layout?n.x+r*n.width:n.y+n.height-r*n.height):(r=(ZC.GY(o,10)-ZC.GY(n.min,10))/(ZC.GY(n.max,10)-ZC.GY(n.min,10)),t="h"===n.layout?n.x+r*n.width:n.y+n.height-r*n.height);else{var s=0;if(o===n.steps[n.steps.length-1])s=n.steps.length-2;else for(var h=0;h<n.steps.length-1;h++)o>=n.steps[h]&&o<n.steps[h+1]&&(s=h);r=("h"===n.layout?n.width:n.height)/(n.steps.length-1),t=n.marker?"h"===n.layout?n.x+r/2+r*s:n.y+n.height-r*s-r+n.marker[1]/2:"h"===n.layout?n.x+r/2+r*s:n.y+n.height-r*s+n.marker[0]/2}(c="h"===n.layout?{x:t-l.iX}:{y:t-l.iY}).visible=!0,("h"===n.layout&&(t<n.x||t>n.x+n.width)||"v"===n.layout&&(t<n.y||t>n.y+n.height))&&(c.visible=!1),zingchart.exec(a,"updateobject",{graphid:l.K,type:"shape",id:"colorscale_cursor",dynamic:!0,data:c})}}}},zingchart.extendAPI("colorscale.setvalue",function(a,e){zingchart.plugins.colorscale.AGD(a,e)}),zingchart.extendAPI("colorscale.update",function(a,e){if(e.data){var i=zingchart.getLoader(a);if(i){var l=i.C7(e[ZC._[3]]);l&&l.o["color-scale"]&&(ZC._todash_(e.data),ZC._cp_(e.data,l.o["color-scale"]),zingchart.plugins.colorscale.paint({id:a,graphid:l.K}))}}}),zingchart.extendAPI("colorscale.clear",function(a,e){zingchart.plugins.colorscale.clear(a,e)}),zingchart.extendAPI("colorscale.getinfo",function(a,e){var i=zingchart.getLoader(a);if(i){var l=i.C7(e[ZC._[3]]);if(l)return zingchart.plugins.colorscale.info[a+"_"+l.L]}return null});