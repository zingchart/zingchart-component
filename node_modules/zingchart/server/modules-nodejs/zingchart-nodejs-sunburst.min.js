/*
All of the code within the ZingChart software is developed and copyrighted by ZingChart, Inc., and may not be copied,
replicated, or used in any other software or application without prior permission from ZingChart. All usage must coincide with the
ZingChart End User License Agreement which can be requested by email at support@zingchart.com.

Build 2.9.3
*/
zingchart.setModule("sunburst"),function(){var e={},t={},a={},r={},i={},l={};zingchart.bind(null,"dataparse",function(n,o){var d,p,s,h,v,u,c,g,f,x=zingchart.getLoader(n.id);for(h=0,v=o.graphset.length;h<v;h++)if(o.graphset[h].type&&"sunburst"===o.graphset[h].type){e[n.id]=!0,r[n.id]||(r[n.id]={}),i[n.id]||(i[n.id]=-1),l[n.id]=[],t[n.id]||(t[n.id]=JSON.stringify(o));var b=o.graphset[h].type;o.graphset[h]["plugin-type"]=b;var _=o.graphset[h];zingchart.normalize(_),_.type="pie";var z=zingchart.getGraphInfo(x,o,h),y={};_.options&&(y=_.options[b]||_.options),ZC._todash_(y);var C=y.root||"";a[n.id]=C;var m=ZC._i_(y.slice||"0"),A=ZC._i_(y.space||"0"),Z=y.palette||["#6A921F","#007FA3","#A62B02","#B79007","#563D02","#0B32A0","#00BAF2","#E80C60","#E2D51A","#9B26AF","#FB301E","#00AE4D","#20398B"],w=y["text-attr"]||"text",k=y["value-attr"]||"value";if(_.series=_.series||[],!(_.series instanceof Array)){var B=[],D={},F=function(e,t){var a=(e.text||e.name||e[w]).toLowerCase().replace(/[^a-z0-9_]+/gi,"");D[a]?a+=D[a]++:D[a]=1;var r={id:a,text:e.text||e.name||e[w]||a,value:e.value||e.size||e[k],parent:t||""};if(B.push(r),e.children)for(var i=0;i<e.children.length;i++)F(e.children[i],a)};F(_.series),_.series=B}for(var O,E={},J=[].concat(_.series).reverse(),L=0,M=J.length,N=0;J.length&&M-- >=0;)for(d=J.length-1;d>=0;d--){u=(c=J[d]).id||"id"+L++,""===(f=c.parent||"")?(E[u]={id:u,level:0,parent:"",text:c.text||c.name||c[w]||u,value:c.value||c.size||c[k],children:[]},l[n.id].push(u),J.splice(d,1)):E[f]&&(E[f].children.push(u),E[u]={id:u,level:E[f].level+1,parent:f,text:c.text||c.name||c[w]||u,value:c.value||c.size||c[k],children:[]},J.splice(d,1),N=Math.max(N,E[u].level));for(O in c)0===O.indexOf("data-")&&(E[u][O]=c[O])}var T=function(e,t){return t=t||[],E[e]&&""!==E[e].parent&&(t.push(E[e].parent),t=t.concat(T(E[e].parent))),t};if(""!==C){for(u in E)u!==C?(g=T(u),-1===ZC.AV(g,C)&&delete E[u]):(E[u]["up-parent"]=E[u].parent,E[u].parent="");var V=E[C].level;for(u in E)E[u].level-=V;N-=V}var G=0,I=0;for(s=0;s<=N;s++){if(0===s)for(u in E)0===E[u].level&&I++;for(u in E){var S="";r[n.id][u]?S=r[n.id][u]:(E[u].level===s&&(S=0===E[u].level||1===E[u].level&&1===I?Z[G++%Z.length]:E[E[u].parent].color),r[n.id][u]=S),E[u].color=S}}var K=function(e){if(E[e]){if(null===ZC._n_(E[e].value))if(0===E[e].children.length)E[e].value=0;else{for(var t=0,a=0;a<E[e].children.length;a++)t+=K(E[e].children[a]);E[e].value=t}return parseFloat(E[e].value)}};for(u in E)E[u].value=K(u);if(-1===i[n.id]){for(u in E)if(0!==E[u].level&&(1!==E[u].level||1!==I)&&r[n.id][u]){g=T(u);var Q=1===I?g[g.length-2]:g[g.length-1],j=1-E[u].value/E[Q].value;r[n.id][u]=E[u].color=ZC.AO.QN(E[u].color,40*j)}i[n.id]=1}var q=[],H=0;for(s=0;s<=N;s++){if(q[s]){var P=[];for(d=0;d<q[s].length;d++){var R=(c=E[q[s][d]]).children,U=0;for(p=0;p<R.length;p++)P.push(R[p]),U+=E[R[p]].value;if(U<c.value){var W="sbfakeid"+H++;E[W]={id:W,parent:c.id,value:c.value-U,level:c.level,children:[],fake:!0,color:c.color},P.push(W)}}q[s]=[].concat(P)}else{q[s]=[];for(u in E)E[u].level===s&&q[s].push(u)}s<N&&(q[s+1]=[].concat(q[s]))}o.graphset.splice(h,1);var X={};ZC._cp_(_,X),delete X.options,delete X.series,X["background-color"]="none",X.x=z.graph.x,X.y=z.graph.y,X.width=z.graph.width,X.height=z.graph.height,X.plot=X.plot||{},X.plot["value-box"]=X.plot["value-box"]||{},X.plot["value-box"].placement=X.plot["value-box"].placement||"radial",X.plot.detach=!1;var Y=.95*(Math.min(z.plotarea.width,z.plotarea.height)/2-m-N*A),$=ZC._i_(Y/(N+1));for(s=0;s<=N;s++){var ee={};ZC._cp_(X,ee),s>0&&(delete ee.title,delete ee.subtitle,delete ee.source,delete ee.legend),ee.id=x.K+s,ee.plot.size=m+$*(s+1)+A*s,ee.plot.slice=m+$*s+A*s,ee.series=[];var te=-1;for(d=0;d<q[s].length;d++){var ae=E[q[s][d]].text,re=ae,ie=E[q[s][d]].id;f=E[q[s][d]]["up-parent"]||E[q[s][d]].parent,0===s&&(""!==f||1===I&&l[n.id].length>1&&-1!==ZC.AV(l[n.id],ie))&&(re="\u25b2 "+re),c={"data-l0items":I,"data-parent":f,"data-uid":ie,"data-level":E[q[s][d]].level,"data-vbtext":re,text:ae,values:[E[q[s][d]].value],"background-color":E[q[s][d]].color,"hover-state":{"background-color":ZC.AO.JI(E[q[s][d]].color,20)}};for(O in E[q[s][d]])0===O.indexOf("data-")&&(c[O]=E[q[s][d]][O]);E[q[s][d]].fake&&(c.visible=!1),E[q[s][d]].fake?-1===te?(ee.series.push(c),te=ee.series.length-1):ee.series[te].values[0]+=c.values[0]:(te=-1,ee.series.push(c))}o.graphset.splice(h,0,ee)}var le={};ZC._cp_(_,le),delete le.options,delete le.series,le.type="null",le.x=z.graph.x,le.y=z.graph.y,le.width=z.graph.width,le.height=z.graph.height,o.graphset.splice(h,0,le)}return o});var n=null;zingchart.bind(null,"node_click",function(e){if("touchend"===e.ev.type){if(null===n)return void(n=(new Date).getTime());if((new Date).getTime()-n>=300)return void(n=(new Date).getTime());n=null}else if(0!==e.ev.button)return;var r=zingchart.getLoader(e.id);if(r){var i=zingchart.getGraph(r,e.graphid);if(i&&"sunburst"===i.o["plugin-type"]){var o=JSON.parse(t[e.id]);(""!==e["data-parent"]||e["data-l0items"]>1||l[e.id].length>1&&-1!==ZC.AV(l[e.id],e["data-uid"]))&&(o.graphset[0].options=o.graphset[0].options||{},a[e.id]===e["data-uid"]?o.graphset[0].options.root=e["data-parent"]:o.graphset[0].options.root=e["data-uid"],zingchart.exec(e.id,"setdata",{data:o}))}}});zingchart.bind(null,"destroy",function(n){e[n.id]&&(delete e[n.id],t={},a={},r={},i={},l={})})}();