/*
All of the code within the ZingChart software is developed and copyrighted by ZingChart, Inc., and may not be copied,
replicated, or used in any other software or application without prior permission from ZingChart. All usage must coincide with the
ZingChart End User License Agreement which can be requested by email at support@zingchart.com.

Build 2.9.3
*/
zingchart.setModule("rankflow"),function(){ZC.ZCRankFlow=function(){var e=function(){this.AEW="palette",this.C1="#6a921f",this.BP=[],this.K5=!1,this.AGH=function(){for(var e=(16777215*Math.random()+1<<0).toString(16);e.length<6;)e="0"+e;return"#"+e}};return e.getDefaults=function(t){var a={};return ZC._cp_(e.B8,a),e.NU[t]&&ZC._cp_(e.NU[t],a),a},e.B8={},e.NU={light:{item:{bold:!0,color:"#808285"},"rank-side":{generated:!0,color:"#fff",bold:!0,"background-color":"#929497"},"rank-overall":{generated:!0,color:"#fff",bold:!0,"background-color":"#57585B"},flow:{generated:!0,shadow:!1}},dark:{item:{bold:!0,color:"#D1D3D4"},"rank-side":{generated:!0,color:"#fff",bold:!0,"background-color":"#929497"},"rank-overall":{generated:!0,color:"#fff",bold:!0,"background-color":"#57585B"},flow:{generated:!0,shadow:!1}},classic:{item:{bold:!0,color:"#D1D2D3"},"rank-side":{generated:!0,color:"#000",bold:!0,"background-color":"#999"},"rank-overall":{generated:!0,color:"#fff",bold:!0,"background-color":"#333"},flow:{generated:!0,shadow:!0}}},e}();var e,t=0,a=0;zingchart.bind(null,"dataparse",function(l,r){var o,n,p,_,c,i,h=zingchart.getLoader(l.id);zingchart.initThemes(h);for(var s=ZC.ZCRankFlow.getDefaults(l.theme),g=0,d=r.graphset.length;g<d;g++)if(r.graphset[g].type&&"rankflow"===r.graphset[g].type){var f=r.graphset[g].type,C=r.graphset[g];ZC._todash_(C);var Z={};C.options&&(Z=C.options[f]||C.options),ZC._todash_(Z);var u=Z.style||{},x=zingchart.getGraphInfo(h,r,g);C.shapes||(C.shapes=[]),C.labels||(C.labels=[]),e=new ZC.ZCRankFlow;var b=!0;null!==ZC._n_(o=Z["global-ranking"])&&(b=ZC._b_(o)),null!==ZC._n_(o=Z["color-type"])&&(e.AEW=o),null!==ZC._n_(o=Z.color)&&(e.C1=ZC.AO.G7(o)),null!==ZC._n_(o=Z.palette)&&(e.BP=o),null!==ZC._n_(o=Z.flat)&&(e.K5=ZC._b_(o));var k=[],v=[],w=C["scale-x"]||{};w.item=C["scale-x"].item||{},(o=w.values)&&(k=o),(o=w.labels)&&(v=o);var y=C.series;for(n=0;n<y.length;n++)y[n].rank=y[n].rank||n+"";y.sort(function(e,t){return e.rank-t.rank});var m,B,z=0,I=0,A=0,D=0,Q=0;for(n=0;n<v.length;n++)(B={}).text=v[n],ZC._cp_(s.item,B),ZC._cp_(B,w.item),(m=zingchart.getInstance(h,"textbox")).append(B),m.parse(),z=ZC.BQ(z,m.I),A=ZC.BQ(A,m.F);for(n=0;n<y.length;n++)_=y[n].style||{},B={text:y[n].text},ZC._cp_(u["item-flow"],B),ZC._cp_(_["item-flow"],B),(m=zingchart.getInstance(h,"textbox")).append(B),m.parse(),z=ZC.BQ(z,m.I),I=ZC.BQ(I,m.F);for(B={text:n,bold:!0},(m=zingchart.getInstance(h,"textbox")).append(B),m.parse(),(D=ZC.BQ(D,m.I))<I&&(D=I),B={generated:!0,text:n,bold:!0,width:2*D},ZC._cp_(u["rank-overall"],B),(m=zingchart.getInstance(h,"textbox")).append(B),m.parse(),(Q=ZC.BQ(Q,m.I))<I&&(Q=I),t=y.length,a=ZC.BQ(k.length,v.length),n=0;n<t;n++)i=y[n].ranks||[],a=ZC.BQ(a,i.length);var E=[0,0,0,0];null!==ZC._n_(o=Z.margin)&&(E=zingchart.getInstance(h,"box").m_(o,"all",x.plotarea.width,x.plotarea.height)),x.plotarea.x+=E[3],x.plotarea.y+=E[0],x.plotarea.width-=E[1]+E[3],x.plotarea.height-=E[0]+E[2];var P,R=20;null!==ZC._n_(o=Z["sep-space"])&&(R=ZC._i_(o)),b?P=(x.plotarea.width-Q-R-3*D-(a+1)*z)/(a-1):(R=0,P=(x.plotarea.width-3*D-a*z)/(a-1));var F=ZC._i_((x.plotarea.height-A-y.length*I)/(y.length+1));null!==ZC._n_(o=Z["col-space"])&&(P=ZC._i_(o)),null!==ZC._n_(o=Z["row-space"])&&(F=ZC._i_(o));var G,K;if(G=x.plotarea.x,K=x.plotarea.y,A>0)for(B={generated:!0,bold:!0,text:"OVERALL<br>RANK",flat:!0},ZC._cp_(w.item,B),ZC._cp_(u["label-overall"],B),ZC._cp_({x:G,y:K,width:Q+z},B),b&&C.labels.push(B),n=0;n<v.length;n++)G=x.plotarea.x+(b?Q+z+R:0)+1.5*D+n*(z+P),K=x.plotarea.y,B={generated:!0,bold:!0},ZC._cp_(w.item,B),ZC._cp_({x:G,y:K,width:z,flat:!0,text:v[n]},B),C.labels.push(B);for(n=0;n<t;n++)G=x.plotarea.x+(b?Q+z+R:0),K=x.plotarea.y+A+F+n*(I+F),B={},ZC._cp_(s["rank-side"],B),ZC._cp_(u["rank-left"],B),ZC._cp_({id:"rank_"+(n+1)+"_l",x:G,y:K,width:D,height:I,flat:!0,text:n+1},B),C.labels.push(B),G=x.plotarea.x+(b?Q+z+R:0)+2*D+a*(z+P)-P,B={},ZC._cp_(s["rank-side"],B),ZC._cp_(u["rank-right"],B),ZC._cp_({id:"rank_"+(n+1)+"_r",x:G,y:K,width:D,height:I,flat:!0,text:n+1},B),C.labels.push(B),G=x.plotarea.x,B={},ZC._cp_(s["rank-overall"],B),ZC._cp_(u["rank-overall"],B),ZC._cp_({id:"rank_"+(n+1)+"_g",x:G,y:K,width:Q,height:I,flat:!0,text:n+1},B),b&&C.labels.push(B);for(n=0;n<y.length;n++)for(_=y[n].style||{},c=e.C1,"palette"===e.AEW?c=e.BP.length>0?e.BP[n%e.BP.length]:zingchart.getPalette(h,n,"bar")[1]:"random"===e.AEW&&(c=e.AGH()),G=x.plotarea.x+Q,K=x.plotarea.y+A+F+n*(I+F),-1!==(y[n].ranks||-1)&&(B={generated:!0,"background-color":c,color:"#fff"},ZC._cp_(u["item-overall"],B),ZC._cp_(_["item-overall"],B),ZC._cp_({id:"box_overall_"+n,x:G,y:K,width:z,height:I,flat:e.K5,text:y[n].text},B),b&&C.labels.push(B)),i=y[n].ranks,p=0;p<i.length;p++)if(null!==ZC._n_(i[p])){var N=[];if(G=x.plotarea.x+(b?Q+z+R:0)+1.5*D+p*(z+P),K=x.plotarea.y+A+F+(i[p]-1)*(I+F),null!==ZC._n_(i[p+1])){var W=x.plotarea.x+(b?Q+z+R:0)+1.5*D+(p+1)*(z+P),L=x.plotarea.y+A+F+(i[p+1]-1)*(I+F);N.push([G,K]),N.push([G+z,K]),N.push([W,L]),N.push([W+z,L]),N.push([W+z,L+I]),N.push([W,L+I]),N.push([G+z,K+I]),N.push([G,K+I])}else N.push([G,K]),N.push([G+z,K]),N.push([G+z,K+I]),N.push([G,K+I]);var O={};O["background-color"]=c,ZC._cp_(s.flow,O),ZC._cp_(C.plot,O),ZC._cp_(y[n],O),ZC._cp_(u.flow,O),ZC._cp_(_.flow,O),ZC._cp_({id:"flow_"+n+"_"+p,type:"poly",points:N,flat:!0,label:{visible:!1}},O),C.shapes.push(O);var U={"background-color":"#fff",color:"#333","border-width":1,"border-color":"#999",padding:10,text:"%text ranked on %rank at %scale-value"};ZC._cp_(u.tooltip,U),ZC._cp_(_.tooltip,U),U.text=U.text.replace(/%text/gi,y[n].text).replace(/%rank/gi,i[p]).replace(/%scale-value/gi,k[p]);for(var H in y[n])-1!==H.indexOf("data-")&&(U.text=U.text.replace(new RegExp("%"+H,"g"),y[n][H][p]||""));B={generated:!0,color:"#fff"},ZC._cp_(u["item-flow"],B),ZC._cp_(_["item-flow"],B),ZC._cp_({id:"box_"+n+"_"+p,x:G,y:K,width:z,height:I,text:y[n].text,tooltip:U},B),C.labels.push(B)}}return r})}();